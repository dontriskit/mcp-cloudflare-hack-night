<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WhiteContext MCP Server</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 2rem;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }
      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem;
        text-align: center;
      }
      .header h1 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }
      .header p {
        opacity: 0.9;
        font-size: 1rem;
      }
      .content {
        padding: 2rem;
      }
      .section {
        margin-bottom: 2rem;
      }
      .section h2 {
        color: #667eea;
        margin-bottom: 1rem;
        font-size: 1.5rem;
      }
      .section p {
        line-height: 1.6;
        color: #555;
        margin-bottom: 1rem;
      }
      .tools-grid {
        display: grid;
        gap: 1rem;
        margin-top: 1rem;
      }
      .tool-card {
        background: #f7f7f7;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 1rem;
        transition: all 0.2s;
      }
      .tool-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
      }
      .tool-name {
        font-weight: 600;
        color: #667eea;
        margin-bottom: 0.5rem;
        font-family: 'Courier New', monospace;
      }
      .tool-desc {
        color: #666;
        font-size: 0.9rem;
      }
      .phase-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      }
      .phase-1 { background: #d4edda; color: #155724; }
      .phase-2 { background: #d1ecf1; color: #0c5460; }
      .phase-3 { background: #fff3cd; color: #856404; }
      .code-block {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 1rem;
        border-radius: 6px;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        margin: 1rem 0;
      }
      .status {
        display: flex;
        justify-content: space-between;
        padding: 1rem;
        background: #f0f0f0;
        border-radius: 8px;
        margin-top: 1rem;
      }
      .status-item {
        text-align: center;
      }
      .status-label {
        font-size: 0.85rem;
        color: #666;
        margin-bottom: 0.25rem;
      }
      .status-value {
        font-size: 1.25rem;
        font-weight: 600;
        color: #667eea;
      }
      .endpoint {
        background: #667eea;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        margin: 0.5rem 0;
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>WhiteContext MCP Server</h1>
        <p>Company Intelligence API - Model Context Protocol</p>
      </div>

      <div class="content">
        <div class="section">
          <h2>Server Status</h2>
          <div class="status">
            <div class="status-item">
              <div class="status-label">Status</div>
              <div class="status-value" id="status">Loading...</div>
            </div>
            <div class="status-item">
              <div class="status-label">MCP Endpoint</div>
              <div class="status-value">/mcp</div>
            </div>
            <div class="status-item">
              <div class="status-label">Version</div>
              <div class="status-value">1.0.0</div>
            </div>
          </div>
        </div>

        <div class="section">
          <h2>About</h2>
          <p>
            This MCP server provides AI assistants with access to the WhiteContext API for
            automated company intelligence analysis. Analyze websites to extract business
            information, company profiles, and market intelligence.
          </p>
          <p>
            <strong>Built for:</strong> World Wild Web AI & MCP Hack Night<br>
            <strong>Stack:</strong> mcp-lite + Cloudflare Workers + Durable Objects
          </p>
        </div>

        <div class="section">
          <h2>Available Tools</h2>

          <h3 style="margin-top: 1.5rem; color: #155724;">Phase 1: Retrieval (Priority)</h3>
          <div class="tools-grid">
            <div class="tool-card">
              <span class="phase-badge phase-1">Phase 1</span>
              <div class="tool-name">get_job_results</div>
              <div class="tool-desc">Fetch results for a completed job by job_id. Auto-cached.</div>
            </div>
            <div class="tool-card">
              <span class="phase-badge phase-1">Phase 1</span>
              <div class="tool-name">get_batch_results</div>
              <div class="tool-desc">Fetch results for a batch analysis.</div>
            </div>
            <div class="tool-card">
              <span class="phase-badge phase-1">Phase 1</span>
              <div class="tool-name">check_job_status</div>
              <div class="tool-desc">Quick status check (no auto-polling).</div>
            </div>
            <div class="tool-card">
              <span class="phase-badge phase-1">Phase 1</span>
              <div class="tool-name">download_results</div>
              <div class="tool-desc">Export job/batch results as JSON or CSV.</div>
            </div>
            <div class="tool-card">
              <span class="phase-badge phase-1">Phase 1</span>
              <div class="tool-name">list_jobs</div>
              <div class="tool-desc">View recent job history.</div>
            </div>
          </div>

          <h3 style="margin-top: 1.5rem; color: #0c5460;">Phase 2: Submission</h3>
          <div class="tools-grid">
            <div class="tool-card">
              <span class="phase-badge phase-2">Phase 2</span>
              <div class="tool-name">submit_job</div>
              <div class="tool-desc">Submit single URL for analysis.</div>
            </div>
            <div class="tool-card">
              <span class="phase-badge phase-2">Phase 2</span>
              <div class="tool-name">submit_bulk_job</div>
              <div class="tool-desc">Submit up to 100 URLs for batch analysis.</div>
            </div>
          </div>

          <h3 style="margin-top: 1.5rem; color: #856404;">Phase 3: Auto-Polling</h3>
          <div class="tools-grid">
            <div class="tool-card">
              <span class="phase-badge phase-3">Phase 3</span>
              <div class="tool-name">analyze_url_wait</div>
              <div class="tool-desc">Submit and wait for completion (auto-poll).</div>
            </div>
            <div class="tool-card">
              <span class="phase-badge phase-3">Phase 3</span>
              <div class="tool-name">analyze_bulk_wait</div>
              <div class="tool-desc">Batch submit and wait for all results.</div>
            </div>
          </div>

          <h3 style="margin-top: 1.5rem; color: #333;">Management</h3>
          <div class="tools-grid">
            <div class="tool-card">
              <div class="tool-name">configure_webhook</div>
              <div class="tool-desc">Set webhook URL for job notifications.</div>
            </div>
            <div class="tool-card">
              <div class="tool-name">clear_cache</div>
              <div class="tool-desc">Clear cached analysis results.</div>
            </div>
          </div>
        </div>

        <div class="section">
          <h2>Quick Start</h2>
          <p>Connect your MCP client to this server:</p>
          <div class="code-block">
{
  "mcpServers": {
    "whitecontext": {
      "url": "https://your-worker.workers.dev/mcp"
    }
  }
}
          </div>
          <p style="margin-top: 1rem;">Example usage in Claude Code or other MCP clients:</p>
          <div class="code-block">
// Analyze a company website
analyze_url_wait({ url: "https://example.com" })

// Check existing job
get_job_results({ job_id: "job_abc123" })

// Batch analysis
analyze_bulk_wait({ urls: ["https://a.com", "https://b.com"] })
          </div>
        </div>
      </div>
    </div>

    <script>
      // Fetch server status
      fetch('/health')
        .then(resp => resp.json())
        .then(data => {
          document.getElementById('status').textContent = data.status === 'healthy' ? '✓ Online' : '✗ Offline';
        })
        .catch(() => {
          document.getElementById('status').textContent = '✗ Offline';
        });
    </script>
  </body>
</html>
